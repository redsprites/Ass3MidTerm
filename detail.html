<!DOCTYPE html>
<html>
<head>
</head>
<body>
<h1>Detail</h1>
<a href="index.html">Back to index</a> | <a id="btn-edit" href="">Edit Blog</a> | <button type="button" id="btn-delete">Delete Blog</button>
<div id="loading">Loading Blog...</div>
<div id="blog">
	<blockquote>
		<em id="blog-text"></em>
	</blockquote>
	<span id="blog-author"></span>
	<hr />
	<div id="display-comments"></div>

	<div id="comments">
		<h2>Comments</h2>
		<form id="add-comment-form">
			<label for="user">User:</label>
			<input type="text" id="user" name="user">
			<label for="comment">Comment:</label>
			<textarea id="comment" name="comment"></textarea>
			<button type="submit">Add comment</button>
		</form>
		<div id="comment-list"></div>
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="assets/api.js"></script>
<script src="assets/database.js"></script>
<script src="assets/getAllURLParams.js"></script>
<script src="app.js"></script>
<script>
	blogs.detail(getAllUrlParams().index);
</script>
<script>
	function addComment (index) {
		document.querySelector('#add-comment-form').addEventListener('submit', function (e) {
		  e.preventDefault();
		  let user = document.querySelector('input[name=user]').value;
		  let comment = document.querySelector('textarea[name=comment]').value;
		  let newComment = {
			user: user,
			comment: comment,
		  };
		  
		  database.addComment(blogs.documentID, index, newComment); // call the updated addComment function in database.js
		});
	  } 
	  addComment(getAllUrlParams().index);
</script>
</body>
</html>
